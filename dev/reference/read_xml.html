<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read HTML or XML. — read_xml • xml2</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Read HTML or XML. — read_xml" />
<meta property="og:description" content="Read HTML or XML." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xml2</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.3.2.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/modification.html">Node Modification</a>
    </li>
    <li>
      <a href="../articles/releases/xml2-1.1.1.html">xml2 1.1.1</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/xml2/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read HTML or XML.</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/xml2/blob/master/R/xml_parse.R'><code>R/xml_parse.R</code></a></small>
    <div class="hidden name"><code>read_xml.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Read HTML or XML.</p>
    </div>

    <pre class="usage"><span class='fu'>read_xml</span><span class='op'>(</span><span class='va'>x</span>, encoding <span class='op'>=</span> <span class='st'>""</span>, <span class='va'>...</span>, as_html <span class='op'>=</span> <span class='cn'>FALSE</span>, options <span class='op'>=</span> <span class='st'>"NOBLANKS"</span><span class='op'>)</span>

<span class='fu'>read_html</span><span class='op'>(</span><span class='va'>x</span>, encoding <span class='op'>=</span> <span class='st'>""</span>, <span class='va'>...</span>, options <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"RECOVER"</span>, <span class='st'>"NOERROR"</span>, <span class='st'>"NOBLANKS"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># S3 method for character</span>
<span class='fu'>read_xml</span><span class='op'>(</span><span class='va'>x</span>, encoding <span class='op'>=</span> <span class='st'>""</span>, <span class='va'>...</span>, as_html <span class='op'>=</span> <span class='cn'>FALSE</span>, options <span class='op'>=</span> <span class='st'>"NOBLANKS"</span><span class='op'>)</span>

<span class='co'># S3 method for raw</span>
<span class='fu'>read_xml</span><span class='op'>(</span>
  <span class='va'>x</span>,
  encoding <span class='op'>=</span> <span class='st'>""</span>,
  base_url <span class='op'>=</span> <span class='st'>""</span>,
  <span class='va'>...</span>,
  as_html <span class='op'>=</span> <span class='cn'>FALSE</span>,
  options <span class='op'>=</span> <span class='st'>"NOBLANKS"</span>
<span class='op'>)</span>

<span class='co'># S3 method for connection</span>
<span class='fu'>read_xml</span><span class='op'>(</span>
  <span class='va'>x</span>,
  encoding <span class='op'>=</span> <span class='st'>""</span>,
  n <span class='op'>=</span> <span class='fl'>64</span> <span class='op'>*</span> <span class='fl'>1024</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>,
  base_url <span class='op'>=</span> <span class='st'>""</span>,
  as_html <span class='op'>=</span> <span class='cn'>FALSE</span>,
  options <span class='op'>=</span> <span class='st'>"NOBLANKS"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A string, a connection, or a raw vector.</p>
<p>A string can be either a path, a url or literal xml. Urls will
be converted into connections either using <code><a href='https://rdrr.io/r/base/connections.html'>base::url</a></code> or, if
installed, <code><a href='https://jeroen.cran.dev/curl/reference/curl.html'>curl::curl</a></code>. Local paths ending in <code>.gz</code>,
<code>.bz2</code>, <code>.xz</code>, <code>.zip</code> will be automatically uncompressed.</p>
<p>If a connection, the complete connection is read into a raw vector before
being parsed.</p></td>
    </tr>
    <tr>
      <th>encoding</th>
      <td><p>Specify a default encoding for the document. Unless
otherwise specified XML documents are assumed to be in UTF-8 or
UTF-16. If the document is not UTF-8/16, and lacks an explicit
encoding directive, this allows you to supply a default.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed on to methods.</p></td>
    </tr>
    <tr>
      <th>as_html</th>
      <td><p>Optionally parse an xml file as if it's html.</p></td>
    </tr>
    <tr>
      <th>options</th>
      <td><p>Set parsing options for the libxml2 parser. Zero or more of
<dl>
  <dt>RECOVER</dt><dd><p>recover on errors</p></dd>
  <dt>NOENT</dt><dd><p>substitute entities</p></dd>
  <dt>DTDLOAD</dt><dd><p>load the external subset</p></dd>
  <dt>DTDATTR</dt><dd><p>default DTD attributes</p></dd>
  <dt>DTDVALID</dt><dd><p>validate with the DTD</p></dd>
  <dt>NOERROR</dt><dd><p>suppress error reports</p></dd>
  <dt>NOWARNING</dt><dd><p>suppress warning reports</p></dd>
  <dt>PEDANTIC</dt><dd><p>pedantic error reporting</p></dd>
  <dt>NOBLANKS</dt><dd><p>remove blank nodes</p></dd>
  <dt>SAX1</dt><dd><p>use the SAX1 interface internally</p></dd>
  <dt>XINCLUDE</dt><dd><p>Implement XInclude substitition</p></dd>
  <dt>NONET</dt><dd><p>Forbid network access</p></dd>
  <dt>NODICT</dt><dd><p>Do not reuse the context dictionary</p></dd>
  <dt>NSCLEAN</dt><dd><p>remove redundant namespaces declarations</p></dd>
  <dt>NOCDATA</dt><dd><p>merge CDATA as text nodes</p></dd>
  <dt>NOXINCNODE</dt><dd><p>do not generate XINCLUDE START/END nodes</p></dd>
  <dt>COMPACT</dt><dd><p>compact small text nodes; no modification of the tree allowed afterwards (will possibly crash if you try to modify the tree)</p></dd>
  <dt>OLD10</dt><dd><p>parse using XML-1.0 before update 5</p></dd>
  <dt>NOBASEFIX</dt><dd><p>do not fixup XINCLUDE xml:base uris</p></dd>
  <dt>HUGE</dt><dd><p>relax any hardcoded limit from the parser</p></dd>
  <dt>OLDSAX</dt><dd><p>parse using SAX2 interface before 2.7.0</p></dd>
  <dt>IGNORE_ENC</dt><dd><p>ignore internal document encoding hint</p></dd>
  <dt>BIG_LINES</dt><dd><p>Store big lines numbers in text PSVI field</p></dd></dl></p></td>
    </tr>
    <tr>
      <th>base_url</th>
      <td><p>When loading from a connection, raw vector or literal
html/xml, this allows you to specify a base url for the document. Base
urls are used to turn relative urls into absolute urls.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>If <code>file</code> is a connection, the number of bytes to read per
iteration. Defaults to 64kb.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>When reading from a slow connection, this prints some
output on every iteration so you know its working.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An XML document. HTML is normalised to valid XML - this may not
be exactly the same transformation performed by the browser, but it's
a reasonable approximation.</p>
    <h2 class="hasAnchor" id="setting-the-user-agent-header"><a class="anchor" href="#setting-the-user-agent-header"></a>Setting the "user agent" header</h2>

    


<p>When performing web scraping tasks it is both good practice --- and often required ---
to set the <a href='https://en.wikipedia.org/wiki/User_agent'>user agent</a> request header
to a specific value. Sometimes this value is assigned to emulate a browser in order
to have content render in a certain way (e.g. <code>Mozilla/5.0 (Windows NT 5.1; rv:52.0) Gecko/20100101 Firefox/52.0</code> to emulate more recent Windows browsers). Most often,
this value should be set to provide the web resource owner information on who you are
and the intent of your actions like this Google scraping bot user agent identifier:
<code>Googlebot/2.1 (+http://www.google.com/bot.html)</code>.</p>
<p>You can set the HTTP user agent for URL-based requests using <code><a href='https://httr.r-lib.org/reference/set_config.html'>httr::set_config()</a></code> and <code><a href='https://httr.r-lib.org/reference/user_agent.html'>httr::user_agent()</a></code>:</p>
<p><code><a href='https://httr.r-lib.org/reference/set_config.html'>httr::set_config(httr::user_agent("me@example.com; +https://example.com/info.html"))</a></code></p>
<p><code><a href='https://httr.r-lib.org/reference/set_config.html'>httr::set_config()</a></code> changes the configuration globally,
<code><a href='https://httr.r-lib.org/reference/with_config.html'>httr::with_config()</a></code> can be used to change configuration temporarily.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Literal xml/html is useful for small examples</span>
<span class='fu'>read_xml</span><span class='op'>(</span><span class='st'>"&lt;foo&gt;&lt;bar /&gt;&lt;/foo&gt;"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; {xml_document}
#&gt; &lt;foo&gt;
#&gt; [1] &lt;bar/&gt;</div><div class='input'><span class='fu'>read_html</span><span class='op'>(</span><span class='st'>"&lt;html&gt;&lt;title&gt;Hi&lt;title&gt;&lt;/html&gt;"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; {html_document}
#&gt; &lt;html&gt;
#&gt; [1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...</div><div class='input'><span class='fu'>read_html</span><span class='op'>(</span><span class='st'>"&lt;html&gt;&lt;title&gt;Hi"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; {html_document}
#&gt; &lt;html&gt;
#&gt; [1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...</div><div class='input'>
<span class='co'># From a local path</span>
<span class='fu'>read_html</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"r-project.html"</span>, package <span class='op'>=</span> <span class='st'>"xml2"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; {html_document}
#&gt; &lt;html lang="en"&gt;
#&gt; [1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
#&gt; [2] &lt;body&gt;\n    &lt;div class="container page"&gt;\n      &lt;div class="row"&gt;\n       ...</div><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># From a url</span>
<span class='va'>cd</span> <span class='op'>&lt;-</span> <span class='fu'>read_xml</span><span class='op'>(</span><span class='fu'><a href='xml2_example.html'>xml2_example</a></span><span class='op'>(</span><span class='st'>"cd_catalog.xml"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>me</span> <span class='op'>&lt;-</span> <span class='fu'>read_html</span><span class='op'>(</span><span class='st'>"http://had.co.nz"</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, <a href='http://jimhester.com'>Jim Hester</a>, Jeroen Ooms.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'fbd8d79ed49f21fc9ca7b2cf601a3f5b',
    indexName: 'xml2',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


